# Заметки про Git hooks

Что такое хуки и как использовать их для проверок перед коммитом.

## Цель

- Понять, что такое Git hooks (pre-commit, commit-msg и т.д.).
- Запускать проверки (скрипты) автоматически перед коммитом при желании.

## Что такое hooks

- В папке `.git/hooks/` лежат скрипты, которые Git вызывает в определённые моменты (перед коммитом, после коммита, перед push и т.д.).
- Примеры: `pre-commit` (выполняется перед `git commit`), `commit-msg` (проверка сообщения).
- Хуки **не коммитятся** в репозиторий (папка .git не отслеживается). Чтобы раздавать хуки команде, их хранят в репо в отдельной папке (например `scripts/git-hooks/`) и копируют в `.git/hooks/` вручную или через скрипт.

## Запуск проверок в pre-commit

Если хочешь перед каждым коммитом запускать проверки:

1. Создай файл `.git/hooks/pre-commit` (исполняемый).
2. Внутри вызови скрипты, например:
   ```bash
   #!/bin/sh
   python scripts/check_links.py && python scripts/check_markdown_hygiene.py
   ```
3. Если скрипт возвращает ненулевой код, коммит отменяется.

## Рекомендации

- Хуки опциональны: в CI проверки всё равно запускаются. Локальные хуки экономят время (не пушишь заведомо сломанное).
- Не навязывай тяжёлые хуки без согласования: быстрый pre-commit (ссылки, гигиена) — ок; долгий тест на каждый коммит может мешать.

## Проверка

- Сделай намеренно «плохой» коммит (например убери строку в PROGRESS) и выполни `git commit` — pre-commit должен отклонить, если проверки включены.
